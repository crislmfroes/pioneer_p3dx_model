<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>p3dx_slam: tutorial_slam.md Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">tutorial_slam.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="tutorial__slam_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# run slam gmapping on a p3-dx inside gazebo.</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;First, source your environment and launch pioneer3dx.launch, found inside the package p3dx_gazebo.</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;```console</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;foo@bar:~$ source /opt/ros/melodic/setup.bash</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;foo@bar:~$ source /path/to/catkin_ws/devel/setup.bash</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;foo@bar:~$ roslaunch p3x_gazebo pioneer3dx.launch world:=map1_wo_robot</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;```</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;![A Pioneer P3-DX robot inside Gazebo.](img/p3dx_gazebo.png &quot;A Pioneer P3-DX robot inside Gazebo.&quot;)</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;Then, open another terminal and launch teleop.launch, found inside the package p3dx_teleop. After executing these commands, another window should be opened automatically, where you can send keyboard commands to control the robot&#39;s twist.</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;```console</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;foo@bar:~$ source /opt/ros/melodic/setup.bash</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;foo@bar:~$ source /path/to/catkin_ws/devel/setup.bash</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;foo@bar:~$ roslaunch p3x_teleop teleop.launch</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;```</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;![The command prompt where you can input velocity commands.](img/teleop_keyboard.png &quot;The command prompt where you can input velocity commands.&quot;)</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;Now, you must open another terminal, source your environment, and then launch the slam.launch file, found inside the package p3dx_slam.</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;```console</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;foo@bar:~$ source /opt/ros/melodic/setup.bash</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;foo@bar:~$ source /path/to/catkin_ws/devel/setup.bash</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;foo@bar:~$ roslaunch p3x_slam slam.launch algorithm:=gmapping</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;```</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;You should now be able to see the robot model in rviz, as well as the environment map that is built by the robot as it navigates said environment. Black pixels represent obstacles, while light gray pixels represent space that has already been mapped. The dark gray pixels surrounding the map represent space that has not been mapped.</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;![The rviz window with the partially generated map of the room.](img/slam_rviz_0.png &quot;The rviz window with the partially generated map of the room.&quot;)</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;Now, you must use the teleoperation window to drive the robot around the environment you wish to map, so drive around the world until you are happy with the completness of the generated map.</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;![The rviz window with the full map of the room.](img/slam_rviz_1.png &quot;The rviz window with the full map of the room.&quot;)</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;Once mapping is done, you have to run the map_saver node, found in the map_server package, to save the map somewhere in your filesystem, where it can be used later for autonomous navigation. Open another terminal and run the following commands:</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;```console</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;foo@bar:~$ source /opt/ros/melodic/setup.bash</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;foo@bar:~$ source /path/to/catkin_ws/devel/setup.bash</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;foo@bar:~$ rosrun map_server map_saver -f /path/to/where/you/want/to/save/the/map</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;```</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;You should now have two files inside the folder where you saved the map. One .pgm file, representing the map&#39;s occupancy grid, and one .yaml file, with parameters such as the resolution of the map, as well as the path to the .pgm file.</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;![The generated .pgm map file.](img/test_map.png &quot;The generated .pgm map file.&quot;)</div></div><!-- fragment --></div><!-- contents -->

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/p3dx_slam">p3dx_slam</a><br />
Author(s): </br />
<small>autogenerated on Fri May 8 2020 02:08:56</small>
</div>
</body>
</html>
